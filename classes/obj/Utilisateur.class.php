<?php
		//Generated by ObjectGenerator::generate() on 10/05/2019 12:52:19
class Utilisateur {

	protected $id; /* int(11) */
	protected $nom; /* varchar(50) */
	protected $prenom; /* varchar(50) */
	protected $email; /* varchar(50) */
	protected $password; /* varchar(255) */
	protected $adresse; /* varchar(255) */
	protected $codepostal; /* varchar(255) */
	protected $ville; /* varchar(50) */

	/* identifiant composite Role */
	protected $role; /* int(11) */
	/* liste des objets Role */
	protected $oRole; /* role Object*/

	protected $empty = true; // permet de savoir si l'objet est vide

	public function __construct($id=0,$nom='',$prenom='',$email='',$password='',$adresse='',$codepostal='',$ville='',$role=0) {
		//Generated by ObjectGenerator::generateConstruct() on 10/05/2019 12:52:19
		$this->id = $id;
		$this->nom = $nom;
		$this->prenom = $prenom;
		$this->email = $email;
		$this->password = $password;
		$this->adresse = $adresse;
		$this->codepostal = $codepostal;
		$this->ville = $ville;
		$this->role = $role;

	}


	public function __clone() {
		//Generated by ObjectGenerator::generateClone() on 10/05/2019 12:52:19
		//Sur le clonage d'un objet on supprime l'identifiant
		$this->_description .= ' / Clone '.__CLASS__.' ID '.$this->_id;
		$this->_id = 0;
	}

	public function getId() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->id;
	}



	public function getNom() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->nom;
	}



	public function getPrenom() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->prenom;
	}



	public function getEmail() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->email;
	}



	public function getPassword() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->password;
	}



	public function getAdresse() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->adresse;
	}



	public function getCodepostal() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->codepostal;
	}



	public function getVille() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->ville;
	}



	public function getRole() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		return $this->role;
	}

	public function getRoleObject() {
		//Generated by ObjectGenerator::generateGet() on 10/05/2019 12:52:19
		if (empty($this->oRole)) {
			$this->setRoleObject();
		}
		if ((empty($this->oRole) || is_null($this->oRole))&& $this->role > 0) {
			$this->setRoleObject();
		}
		return $this->oRole;
	}


	public function setId($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		/* La modification de l'identifiant DB est interdite SAUF SI l'objet est vide au depart */
		if (!$this->getEmpty()) {
			return;
		}
		$this->id = $nouvelleValeur;
	}



	public function setNom($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		$this->nom = $nouvelleValeur;
	}



	public function setPrenom($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		$this->prenom = $nouvelleValeur;
	}



	public function setEmail($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		$this->email = $nouvelleValeur;
	}



	public function setPassword($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		$this->password = $nouvelleValeur;
	}



	public function setAdresse($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		$this->adresse = $nouvelleValeur;
	}



	public function setCodepostal($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		$this->codepostal = $nouvelleValeur;
	}



	public function setVille($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		$this->ville = $nouvelleValeur;
	}



	public function setRole($nouvelleValeur) {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		/* La modification de l'identifiant DB est interdite SAUF SI l'objet est vide au depart */
		if ($this->getEmpty() === false) {
			return;
		}
		/* un identifiant est toujours un entier non nul */
		if (!intval($nouvelleValeur) || $nouvelleValeur < 0) {
			return false;
		}
		/* la valeur est un entier <=> troncage des reels */
		$this->role = floor($nouvelleValeur);
	}

	protected function setRoleObject() {
		//Generated by ObjectGenerator::generateSet() on 10/05/2019 12:52:19
		if ($this->role > 0) {
			$this->oRole = FactoryRole::getFromTableRole($this->role);
		}
	}

	public function __toString() {
		//Generated by ObjectGenerator::generateToString() on 10/05/2019 12:52:19
		$chaine = 'Objet '.get_class($this).':<br/>';
		$chaine .= 'Le champ id vaut '.$this->getId().'<br/>';
		$chaine .= 'Le champ nom vaut '.$this->getNom().'<br/>';
		$chaine .= 'Le champ prenom vaut '.$this->getPrenom().'<br/>';
		$chaine .= 'Le champ email vaut '.$this->getEmail().'<br/>';
		$chaine .= 'Le champ password vaut '.$this->getPassword().'<br/>';
		$chaine .= 'Le champ adresse vaut '.$this->getAdresse().'<br/>';
		$chaine .= 'Le champ codepostal vaut '.$this->getCodepostal().'<br/>';
		$chaine .= 'Le champ ville vaut '.$this->getVille().'<br/>';
		$chaine .= 'Le champ role vaut '.$this->getRole().'<br/>';
		return $chaine;
	}

	public function save() {
		//Generated by ObjectGenerator::generateSave() on 10/05/2019 12:52:19
		if ($this->getId() > 0) {
			/* un identifiant superieur a 0 implique un ancien objet => UPDATE */
			return$this->update();
		} else {
			$requete = 'INSERT INTO utilisateur (id,nom,prenom,email,password,adresse,codepostal,ville,role)';
			$requete .= ' VALUES ';
			$requete .= '(';
				$requete .= 'nom,';
				$requete .= 'prenom,';
				$requete .= 'email,';
				$requete .= 'password,';
				$requete .= 'adresse,';
				$requete .= 'codepostal,';
				$requete .= 'ville,';
				$requete .= 'role,';
			$requete = substr($requete,0,strlen($requete)-1);
			$requete .= ')';
			return $requete;
		}
	}

	public function update() {
		//Generated by ObjectGenerator::generateUpdate() on 10/05/2019 12:52:19
		if ($this->getId() == 0 || $this->getId() == null) {
			/* un identifiant 0 ou null implique un nouvel objet => INSERT */
			return$this->save();
		} else {
			$requete = 'UPDATE utilisateur SET ';
			$requete .= 'nom = \''.$this->getNom().'\',';
			$requete .= 'prenom = \''.$this->getPrenom().'\',';
			$requete .= 'email = \''.$this->getEmail().'\',';
			$requete .= 'password = \''.$this->getPassword().'\',';
			$requete .= 'adresse = \''.$this->getAdresse().'\',';
			$requete .= 'codepostal = \''.$this->getCodepostal().'\',';
			$requete .= 'ville = \''.$this->getVille().'\',';
			$requete .= 'role = '.$this->getRole().',';
			$requete = substr($requete,0,strlen($requete)-1);
			$requete .= ' WHERE id = '.$this->getId();
			return $requete;
		}
	}

	public function delete() {
		//Generated by ObjectGenerator::generateDelete() on 10/05/2019 12:52:19
		if ($this->getId() == 0 || $this->getId() == null) {
			throw new Exception(get_class($this).": aucun identifiant donn&eacute; pour supprimer");
		} else {
			return 'DELETE FROM utilisateur WHERE id = '.$this->getId();
		}
	}

	public function getParent() {
		//Generated by ObjectGenerator::generateGetParent() on 10/05/2019 12:52:19
		return ('parent::__construct($id,$nom,$prenom,$email,$password,$adresse,$codepostal,$ville,$role);');
	}

	public function getAttributes() {
		//Generated by ObjectGenerator::generateGetAttributes() on 10/05/2019 12:52:19
		$result = array();
		$result2 = array();
		$reflection = new ReflectionClass($this);
		$result = $reflection->getdefaultProperties();
		$result = array_keys($result);
		foreach ($result AS $data) {
			$result2[] = substr($data,1);
		}
		return $result2;
	}

	public function compareTo($object) {
		//Generated by ObjectGenerator::generateCompareTo() on 10/05/2019 12:52:19
		$data = array();
		if ($object instanceof Utilisateur) {
			if ($this->id != $object->getId()) {
				$data['id'] = $object->getId();
			}
			if ($this->nom != $object->getNom()) {
				$data['nom'] = $object->getNom();
			}
			if ($this->prenom != $object->getPrenom()) {
				$data['prenom'] = $object->getPrenom();
			}
			if ($this->email != $object->getEmail()) {
				$data['email'] = $object->getEmail();
			}
			if ($this->password != $object->getPassword()) {
				$data['password'] = $object->getPassword();
			}
			if ($this->adresse != $object->getAdresse()) {
				$data['adresse'] = $object->getAdresse();
			}
			if ($this->codepostal != $object->getCodepostal()) {
				$data['codepostal'] = $object->getCodepostal();
			}
			if ($this->ville != $object->getVille()) {
				$data['ville'] = $object->getVille();
			}
			if ($this->role != $object->getRole()) {
				$data['role'] = $object->getRole();
			}
		}
		return $data;
	}

	public function encodeDecodeJSON($json_str='') {
		//Generated by ObjectGenerator::generateEncodeDecodeJSON() on 10/05/2019 12:52:19
		if ($json_str == '') {
			// Objet standard a remplir
			$json= new stdClass();
			foreach ($this as $key => $value) {
				if (substr($key,0,1) == '_') {
					$key = substr($key,1);
					//on evite de faire sortir les objet fonctionnels
					if (strtolower(substr($key,0,1)) != 'o') {
						$json->$key = $value;
					}
				}
				$json->$key = $value;
			}
			return json_encode($json);
		} else {
			/* decodage et hydratation des datas JSON */
			$json = json_decode($json_str, 1);
			foreach ($json as $key => $value) {
				$method = 'set'.ucfirst($key);
				//Si la methode existe alors on l'utilise
				if (method_exists($this, $method)) {
					$this->$method($value);
				}
			}
		}
	}

	public function getClass() {
		//Generated by ObjectGenerator::generateGetClass() on 10/05/2019 12:52:19
		return get_class($this);
	}

	public function getEmpty() {
		//Generated by ObjectGenerator::generateIsEmpty() on 10/05/2019 12:52:19
		return $this->empty;
	}

	public function setEmpty($nouvelleValeurEmpty) {
		//Generated by ObjectGenerator::generateIsEmpty() on 10/05/2019 12:52:19
		if (is_bool($nouvelleValeurEmpty)) {
			$this->empty = $nouvelleValeurEmpty;
		}
	}

	public function affiche() {
		//Generated by ObjectGenerator::generateAffiche() on 10/05/2019 12:52:19
		/* Chargement de Smarty */
		require_once(_SMARTY_LOAD_);
		$smarty->assign('utilisateur',$this);
		$smarty->assign('aListeMethodes',get_class_methods($this));
		$smarty->assign('urlVersMiniature',_URL_MINIATURES_.$this->getNom().'.jpg');
		/* Appel de l'affichage pour la classe en cour d'utilisation */
		$smarty->display(_TEMPLATES_BASE_.'classes/Utilisateur.tpl');
	}

}
?>